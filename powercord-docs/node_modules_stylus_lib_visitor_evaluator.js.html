<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: node_modules/stylus/lib/visitor/evaluator.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: node_modules/stylus/lib/visitor/evaluator.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/*!
 * Stylus - Evaluator
 * Copyright (c) Automattic &lt;developer.wordpress.com>
 * MIT Licensed
 */

/**
 * Module dependencies.
 */

var Visitor = require('./')
  , units = require('../units')
  , nodes = require('../nodes')
  , Stack = require('../stack')
  , Frame = require('../stack/frame')
  , utils = require('../utils')
  , bifs = require('../functions')
  , dirname = require('path').dirname
  , colors = require('../colors')
  , debug = require('debug')('stylus:evaluator')
  , fs = require('fs');

/**
 * Import `file` and return Block node.
 *
 * @api private
 */
function importFile(node, file, literal) {
  var importStack = this.importStack
    , Parser = require('../parser')
    , stat;

  // Handling the `require`
  if (node.once) {
    if (this.requireHistory[file]) return nodes.null;
    this.requireHistory[file] = true;

    if (literal &amp;&amp; !this.includeCSS) {
      return node;
    }
  }

  // Avoid overflows from importing the same file over again
  if (~importStack.indexOf(file))
    throw new Error('import loop has been found');

  var str = fs.readFileSync(file, 'utf8');

  // shortcut for empty files
  if (!str.trim()) return nodes.null;

  // Expose imports
  node.path = file;
  node.dirname = dirname(file);
  // Store the modified time
  stat = fs.statSync(file);
  node.mtime = stat.mtime;
  this.paths.push(node.dirname);

  if (this.options._imports) this.options._imports.push(node.clone());

  // Parse the file
  importStack.push(file);
  nodes.filename = file;

  if (literal) {
    literal = new nodes.Literal(str.replace(/\r\n?/g, '\n'));
    literal.lineno = literal.column = 1;
    if (!this.resolveURL) return literal;
  }

  // parse
  var block = new nodes.Block
    , parser = new Parser(str, utils.merge({ root: block }, this.options));

  try {
    block = parser.parse();
  } catch (err) {
    var line = parser.lexer.lineno
      , column = parser.lexer.column;

    if (literal &amp;&amp; this.includeCSS &amp;&amp; this.resolveURL) {
      this.warn('ParseError: ' + file + ':' + line + ':' + column + '. This file included as-is');
      return literal;
    } else {
      err.filename = file;
      err.lineno = line;
      err.column = column;
      err.input = str;
      throw err;
    }
  }

  // Evaluate imported "root"
  block = block.clone(this.currentBlock);
  block.parent = this.currentBlock;
  block.scope = false;
  var ret = this.visit(block);
  importStack.pop();
  if (!this.resolveURL || this.resolveURL.nocheck) this.paths.pop();

  return ret;
}

/**
 * Initialize a new `Evaluator` with the given `root` Node
 * and the following `options`.
 *
 * Options:
 *
 *   - `compress`  Compress the css output, defaults to false
 *   - `warn`  Warn the user of duplicate function definitions etc
 *
 * @param {Node} root
 * @api private
 */

var Evaluator = module.exports = function Evaluator(root, options) {
  options = options || {};
  Visitor.call(this, root);
  var functions = this.functions = options.functions || {};
  this.stack = new Stack;
  this.imports = options.imports || [];
  this.globals = options.globals || {};
  this.paths = options.paths || [];
  this.prefix = options.prefix || '';
  this.filename = options.filename;
  this.includeCSS = options['include css'];
  this.resolveURL = functions.url
    &amp;&amp; 'resolver' == functions.url.name
    &amp;&amp; functions.url.options;
  this.paths.push(dirname(options.filename || '.'));
  this.stack.push(this.global = new Frame(root));
  this.warnings = options.warn;
  this.options = options;
  this.calling = []; // TODO: remove, use stack
  this.importStack = [];
  this.requireHistory = {};
  this.return = 0;
};

/**
 * Inherit from `Visitor.prototype`.
 */

Evaluator.prototype.__proto__ = Visitor.prototype;

/**
 * Proxy visit to expose node line numbers.
 *
 * @param {Node} node
 * @return {Node}
 * @api private
 */

var visit = Visitor.prototype.visit;
Evaluator.prototype.visit = function(node){
  try {
    return visit.call(this, node);
  } catch (err) {
    if (err.filename) throw err;
    err.lineno = node.lineno;
    err.column = node.column;
    err.filename = node.filename;
    err.stylusStack = this.stack.toString();
    try {
      err.input = fs.readFileSync(err.filename, 'utf8');
    } catch (err) {
      // ignore
    }
    throw err;
  }
};

/**
 * Perform evaluation setup:
 *
 *   - populate global scope
 *   - iterate imports
 *
 * @api private
 */

Evaluator.prototype.setup = function(){
  var root = this.root;
  var imports = [];

  this.populateGlobalScope();
  this.imports.forEach(function(file){
    var expr = new nodes.Expression;
    expr.push(new nodes.String(file));
    imports.push(new nodes.Import(expr));
  }, this);

  root.nodes = imports.concat(root.nodes);
};

/**
 * Populate the global scope with:
 *
 *   - css colors
 *   - user-defined globals
 *
 * @api private
 */

Evaluator.prototype.populateGlobalScope = function(){
  var scope = this.global.scope;

  // colors
  Object.keys(colors).forEach(function(name){
    var color = colors[name]
      , rgba = new nodes.RGBA(color[0], color[1], color[2], color[3])
      , node = new nodes.Ident(name, rgba);
    rgba.name = name;
    scope.add(node);
  });

  // expose url function
  scope.add(new nodes.Ident(
    'embedurl',
    new nodes.Function('embedurl', require('../functions/url')({
      limit: false
    }))
  ));

  // user-defined globals
  var globals = this.globals;
  Object.keys(globals).forEach(function(name){
    var val = globals[name];
    if (!val.nodeName) val = new nodes.Literal(val);
    scope.add(new nodes.Ident(name, val));
  });
};

/**
 * Evaluate the tree.
 *
 * @return {Node}
 * @api private
 */

Evaluator.prototype.evaluate = function(){
  debug('eval %s', this.filename);
  this.setup();
  return this.visit(this.root);
};

/**
 * Visit Group.
 */

Evaluator.prototype.visitGroup = function(group){
  group.nodes = group.nodes.map(function(selector){
    selector.val = this.interpolate(selector);
    debug('ruleset %s', selector.val);
    return selector;
  }, this);

  group.block = this.visit(group.block);
  return group;
};

/**
 * Visit Return.
 */

Evaluator.prototype.visitReturn = function(ret){
  ret.expr = this.visit(ret.expr);
  throw ret;
};

/**
 * Visit Media.
 */

Evaluator.prototype.visitMedia = function(media){
  media.block = this.visit(media.block);
  media.val = this.visit(media.val);
  return media;
};

/**
 * Visit QueryList.
 */

Evaluator.prototype.visitQueryList = function(queries){
  var val, query;
  queries.nodes.forEach(this.visit, this);

  if (1 == queries.nodes.length) {
    query = queries.nodes[0];
    if (val = this.lookup(query.type)) {
      val = val.first.string;
      if (!val) return queries;
      var Parser = require('../parser')
        , parser = new Parser(val, this.options);
      queries = this.visit(parser.queries());
    }
  }
  return queries;
};

/**
 * Visit Query.
 */

Evaluator.prototype.visitQuery = function(node){
  node.predicate = this.visit(node.predicate);
  node.type = this.visit(node.type);
  node.nodes.forEach(this.visit, this);
  return node;
};

/**
 * Visit Feature.
 */

Evaluator.prototype.visitFeature = function(node){
  node.name = this.interpolate(node);
  if (node.expr) {
    this.return++;
    node.expr = this.visit(node.expr);
    this.return--;
  }
  return node;
};

/**
 * Visit Object.
 */

Evaluator.prototype.visitObject = function(obj){
  for (var key in obj.vals) {
    obj.vals[key] = this.visit(obj.vals[key]);
  }
  return obj;
};

/**
 * Visit Member.
 */

Evaluator.prototype.visitMember = function(node){
  var left = node.left
    , right = node.right
    , obj = this.visit(left).first;

  if ('object' != obj.nodeName) {
    throw new Error(left.toString() + ' has no property .' + right);
  }
  if (node.val) {
    this.return++;
    obj.set(right.name, this.visit(node.val));
    this.return--;
  }
  return obj.get(right.name);
};

/**
 * Visit Keyframes.
 */

Evaluator.prototype.visitKeyframes = function(keyframes){
  var val;
  if (keyframes.fabricated) return keyframes;
  keyframes.val = this.interpolate(keyframes).trim();
  if (val = this.lookup(keyframes.val)) {
    keyframes.val = val.first.string || val.first.name;
  }
  keyframes.block = this.visit(keyframes.block);

  if ('official' != keyframes.prefix) return keyframes;

  this.vendors.forEach(function(prefix){
    // IE never had prefixes for keyframes
    if ('ms' == prefix) return;
    var node = keyframes.clone();
    node.val = keyframes.val;
    node.prefix = prefix;
    node.block = keyframes.block;
    node.fabricated = true;
    this.currentBlock.push(node);
  }, this);

  return nodes.null;
};

/**
 * Visit Function.
 */

Evaluator.prototype.visitFunction = function(fn){
  // check local
  var local = this.stack.currentFrame.scope.lookup(fn.name);
  if (local) this.warn('local ' + local.nodeName + ' "' + fn.name + '" previously defined in this scope');

  // user-defined
  var user = this.functions[fn.name];
  if (user) this.warn('user-defined function "' + fn.name + '" is already defined');

  // BIF
  var bif = bifs[fn.name];
  if (bif) this.warn('built-in function "' + fn.name + '" is already defined');

  return fn;
};

/**
 * Visit Each.
 */

Evaluator.prototype.visitEach = function(each){
  this.return++;
  var expr = utils.unwrap(this.visit(each.expr))
    , len = expr.nodes.length
    , val = new nodes.Ident(each.val)
    , key = new nodes.Ident(each.key || '__index__')
    , scope = this.currentScope
    , block = this.currentBlock
    , vals = []
    , self = this
    , body
    , obj;
  this.return--;

  each.block.scope = false;

  function visitBody(key, val) {
    scope.add(val);
    scope.add(key);
    body = self.visit(each.block.clone());
    vals = vals.concat(body.nodes);
  }

  // for prop in obj
  if (1 == len &amp;&amp; 'object' == expr.nodes[0].nodeName) {
    obj = expr.nodes[0];
    for (var prop in obj.vals) {
      val.val = new nodes.String(prop);
      key.val = obj.get(prop);
      visitBody(key, val);
    }
  } else {
    for (var i = 0; i &lt; len; ++i) {
      val.val = expr.nodes[i];
      key.val = new nodes.Unit(i);
      visitBody(key, val);
    }
  }

  this.mixin(vals, block);
  return vals[vals.length - 1] || nodes.null;
};

/**
 * Visit Call.
 */

Evaluator.prototype.visitCall = function(call){
  debug('call %s', call);
  var fn = this.lookup(call.name)
    , literal
    , ret;

  // url()
  this.ignoreColors = 'url' == call.name;

  // Variable function
  if (fn &amp;&amp; 'expression' == fn.nodeName) {
    fn = fn.nodes[0];
  }

  // Not a function? try user-defined or built-ins
  if (fn &amp;&amp; 'function' != fn.nodeName) {
    fn = this.lookupFunction(call.name);
  }

  // Undefined function? render literal CSS
  if (!fn || fn.nodeName != 'function') {
    debug('%s is undefined', call);
    // Special case for `calc`
    if ('calc' == this.unvendorize(call.name)) {
      literal = call.args.nodes &amp;&amp; call.args.nodes[0];
      if (literal) ret = new nodes.Literal(call.name + literal);
    } else {
      ret = this.literalCall(call);
    }
    this.ignoreColors = false;
    return ret;
  }

  this.calling.push(call.name);

  // Massive stack
  if (this.calling.length > 200) {
    throw new RangeError('Maximum stylus call stack size exceeded');
  }

  // First node in expression
  if ('expression' == fn.nodeName) fn = fn.first;

  // Evaluate arguments
  this.return++;
  var args = this.visit(call.args);

  for (var key in args.map) {
    args.map[key] = this.visit(args.map[key].clone());
  }
  this.return--;

  // Built-in
  if (fn.fn) {
    debug('%s is built-in', call);
    ret = this.invokeBuiltin(fn.fn, args);
  // User-defined
  } else if ('function' == fn.nodeName) {
    debug('%s is user-defined', call);
    // Evaluate mixin block
    if (call.block) call.block = this.visit(call.block);
    ret = this.invokeFunction(fn, args, call.block);
  }

  this.calling.pop();
  this.ignoreColors = false;
  return ret;
};

/**
 * Visit Ident.
 */

Evaluator.prototype.visitIdent = function(ident){
  var prop;
  // Property lookup
  if (ident.property) {
    if (prop = this.lookupProperty(ident.name)) {
      return this.visit(prop.expr.clone());
    }
    return nodes.null;
  // Lookup
  } else if (ident.val.isNull) {
    var val = this.lookup(ident.name);
    // Object or Block mixin
    if (val &amp;&amp; ident.mixin) this.mixinNode(val);
    return val ? this.visit(val) : ident;
  // Assign
  } else {
    this.return++;
    ident.val = this.visit(ident.val);
    this.return--;
    this.currentScope.add(ident);
    return ident.val;
  }
};

/**
 * Visit BinOp.
 */

Evaluator.prototype.visitBinOp = function(binop){
  // Special-case "is defined" pseudo binop
  if ('is defined' == binop.op) return this.isDefined(binop.left);

  this.return++;
  // Visit operands
  var op = binop.op
    , left = this.visit(binop.left)
    , right = ('||' == op || '&amp;&amp;' == op)
      ? binop.right : this.visit(binop.right);

  // HACK: ternary
  var val = binop.val
    ? this.visit(binop.val)
    : null;
  this.return--;

  // Operate
  try {
    return this.visit(left.operate(op, right, val));
  } catch (err) {
    // disregard coercion issues in equality
    // checks, and simply return false
    if ('CoercionError' == err.name) {
      switch (op) {
        case '==':
          return nodes.false;
        case '!=':
          return nodes.true;
      }
    }
    throw err;
  }
};

/**
 * Visit UnaryOp.
 */

Evaluator.prototype.visitUnaryOp = function(unary){
  var op = unary.op
    , node = this.visit(unary.expr);

  if ('!' != op) {
    node = node.first.clone();
    utils.assertType(node, 'unit');
  }

  switch (op) {
    case '-':
      node.val = -node.val;
      break;
    case '+':
      node.val = +node.val;
      break;
    case '~':
      node.val = ~node.val;
      break;
    case '!':
      return node.toBoolean().negate();
  }

  return node;
};

/**
 * Visit TernaryOp.
 */

Evaluator.prototype.visitTernary = function(ternary){
  var ok = this.visit(ternary.cond).toBoolean();
  return ok.isTrue
    ? this.visit(ternary.trueExpr)
    : this.visit(ternary.falseExpr);
};

/**
 * Visit Expression.
 */

Evaluator.prototype.visitExpression = function(expr){
  for (var i = 0, len = expr.nodes.length; i &lt; len; ++i) {
    expr.nodes[i] = this.visit(expr.nodes[i]);
  }

  // support (n * 5)px etc
  if (this.castable(expr)) expr = this.cast(expr);

  return expr;
};

/**
 * Visit Arguments.
 */

Evaluator.prototype.visitArguments = Evaluator.prototype.visitExpression;

/**
 * Visit Property.
 */

Evaluator.prototype.visitProperty = function(prop){
  var name = this.interpolate(prop)
    , fn = this.lookup(name)
    , call = fn &amp;&amp; 'function' == fn.first.nodeName
    , literal = ~this.calling.indexOf(name)
    , _prop = this.property;

  // Function of the same name
  if (call &amp;&amp; !literal &amp;&amp; !prop.literal) {
    var args = nodes.Arguments.fromExpression(utils.unwrap(prop.expr.clone()));
    prop.name = name;
    this.property = prop;
    this.return++;
    this.property.expr = this.visit(prop.expr);
    this.return--;
    var ret = this.visit(new nodes.Call(name, args));
    this.property = _prop;
    return ret;
  // Regular property
  } else {
    this.return++;
    prop.name = name;
    prop.literal = true;
    this.property = prop;
    prop.expr = this.visit(prop.expr);
    this.property = _prop;
    this.return--;
    return prop;
  }
};

/**
 * Visit Root.
 */

Evaluator.prototype.visitRoot = function(block){
  // normalize cached imports
  if (block != this.root) {
    block.constructor = nodes.Block;
    return this.visit(block);
  }

  for (var i = 0; i &lt; block.nodes.length; ++i) {
    block.index = i;
    block.nodes[i] = this.visit(block.nodes[i]);
  }
  return block;
};

/**
 * Visit Block.
 */

Evaluator.prototype.visitBlock = function(block){
  this.stack.push(new Frame(block));
  for (block.index = 0; block.index &lt; block.nodes.length; ++block.index) {
    try {
      block.nodes[block.index] = this.visit(block.nodes[block.index]);
    } catch (err) {
      if ('return' == err.nodeName) {
        if (this.return) {
          this.stack.pop();
          throw err;
        } else {
          block.nodes[block.index] = err;
          break;
        }
      } else {
        throw err;
      }
    }
  }
  this.stack.pop();
  return block;
};

/**
 * Visit Atblock.
 */

Evaluator.prototype.visitAtblock = function(atblock){
  atblock.block = this.visit(atblock.block);
  return atblock;
};

/**
 * Visit Atrule.
 */

Evaluator.prototype.visitAtrule = function(atrule){
  atrule.val = this.interpolate(atrule);
  if (atrule.block) atrule.block = this.visit(atrule.block);
  return atrule;
};

/**
 * Visit Supports.
 */

Evaluator.prototype.visitSupports = function(node){
  var condition = node.condition
    , val;

  this.return++;
  node.condition = this.visit(condition);
  this.return--;

  val = condition.first;
  if (1 == condition.nodes.length
    &amp;&amp; 'string' == val.nodeName) {
    node.condition = val.string;
  }
  node.block = this.visit(node.block);
  return node;
};

/**
 * Visit If.
 */

Evaluator.prototype.visitIf = function(node){
  var ret
    , block = this.currentBlock
    , negate = node.negate;

  this.return++;
  var ok = this.visit(node.cond).first.toBoolean();
  this.return--;

  node.block.scope = node.block.hasMedia;

  // Evaluate body
  if (negate) {
    // unless
    if (ok.isFalse) {
      ret = this.visit(node.block);
    }
  } else {
    // if
    if (ok.isTrue) {
      ret = this.visit(node.block);
    // else
    } else if (node.elses.length) {
      var elses = node.elses
        , len = elses.length
        , cond;
      for (var i = 0; i &lt; len; ++i) {
        // else if
        if (elses[i].cond) {
          elses[i].block.scope = elses[i].block.hasMedia;
          this.return++;
          cond = this.visit(elses[i].cond).first.toBoolean();
          this.return--;
          if (cond.isTrue) {
            ret = this.visit(elses[i].block);
            break;
          }
        // else
        } else {
          elses[i].scope = elses[i].hasMedia;
          ret = this.visit(elses[i]);
        }
      }
    }
  }

  // mixin conditional statements within
  // a selector group or at-rule
  if (ret &amp;&amp; !node.postfix &amp;&amp; block.node
    &amp;&amp; ~['group'
       , 'atrule'
       , 'media'
       , 'supports'
       , 'keyframes'].indexOf(block.node.nodeName)) {
    this.mixin(ret.nodes, block);
    return nodes.null;
  }

  return ret || nodes.null;
};

/**
 * Visit Extend.
 */

Evaluator.prototype.visitExtend = function(extend){
  var block = this.currentBlock;
  if ('group' != block.node.nodeName) block = this.closestGroup;
  extend.selectors.forEach(function(selector){
    block.node.extends.push({
      // Cloning the selector for when we are in a loop and don't want it to affect
      // the selector nodes and cause the values to be different to expected
      selector: this.interpolate(selector.clone()).trim(),
      optional: selector.optional,
      lineno: selector.lineno,
      column: selector.column
    });
  }, this);
  return nodes.null;
};

/**
 * Visit Import.
 */

Evaluator.prototype.visitImport = function(imported){
  this.return++;

  var path = this.visit(imported.path).first
    , nodeName = imported.once ? 'require' : 'import'
    , found
    , literal;

  this.return--;
  debug('import %s', path);

  // url() passed
  if ('url' == path.name) {
    if (imported.once) throw new Error('You cannot @require a url');

    return imported;
  }

  // Ensure string
  if (!path.string) throw new Error('@' + nodeName + ' string expected');

  var name = path = path.string;

  // Absolute URL or hash
  if (/(?:url\s*\(\s*)?['"]?(?:#|(?:https?:)?\/\/)/i.test(path)) {
    if (imported.once) throw new Error('You cannot @require a url');
    return imported;
  }

  // Literal
  if (/\.css(?:"|$)/.test(path)) {
    literal = true;
    if (!imported.once &amp;&amp; !this.includeCSS) {
      return imported;
    }
  }

  // support optional .styl
  if (!literal &amp;&amp; !/\.styl$/i.test(path)) path += '.styl';

  // Lookup
  found = utils.find(path, this.paths, this.filename);
  if (!found) {
    found = utils.lookupIndex(name, this.paths, this.filename);
  }

  // Throw if import failed
  if (!found) throw new Error('failed to locate @' + nodeName + ' file ' + path);
  
  var block = new nodes.Block;

  for (var i = 0, len = found.length; i &lt; len; ++i) {
    block.push(importFile.call(this, imported, found[i], literal));
  }

  return block;
};

/**
 * Invoke `fn` with `args`.
 *
 * @param {Function} fn
 * @param {Array} args
 * @return {Node}
 * @api private
 */

Evaluator.prototype.invokeFunction = function(fn, args, content){
  var block = new nodes.Block(fn.block.parent);

  // Clone the function body
  // to prevent mutation of subsequent calls
  var body = fn.block.clone(block);

  // mixin block
  var mixinBlock = this.stack.currentFrame.block;

  // new block scope
  this.stack.push(new Frame(block));
  var scope = this.currentScope;

  // normalize arguments
  if ('arguments' != args.nodeName) {
    var expr = new nodes.Expression;
    expr.push(args);
    args = nodes.Arguments.fromExpression(expr);
  }

  // arguments local
  scope.add(new nodes.Ident('arguments', args));

  // mixin scope introspection
  scope.add(new nodes.Ident('mixin', this.return
    ? nodes.false
    : new nodes.String(mixinBlock.nodeName)));

  // current property
  if (this.property) {
    var prop = this.propertyExpression(this.property, fn.name);
    scope.add(new nodes.Ident('current-property', prop));
  } else {
    scope.add(new nodes.Ident('current-property', nodes.null));
  }

  // current call stack
  var expr = new nodes.Expression;
  for (var i = this.calling.length - 1; i-- ; ) {
    expr.push(new nodes.Literal(this.calling[i]));
  };
  scope.add(new nodes.Ident('called-from', expr));

  // inject arguments as locals
  var i = 0
    , len = args.nodes.length;
  fn.params.nodes.forEach(function(node){
    // rest param support
    if (node.rest) {
      node.val = new nodes.Expression;
      for (; i &lt; len; ++i) node.val.push(args.nodes[i]);
      node.val.preserve = true;
      node.val.isList = args.isList;
    // argument default support
    } else {
      var arg = args.map[node.name] || args.nodes[i++];
      node = node.clone();
      if (arg) {
        arg.isEmpty ? args.nodes[i - 1] = this.visit(node) : node.val = arg;
      } else {
        args.push(node.val);
      }

      // required argument not satisfied
      if (node.val.isNull) {
        throw new Error('argument "' + node + '" required for ' + fn);
      }
    }

    scope.add(node);
  }, this);

  // mixin block
  if (content) scope.add(new nodes.Ident('block', content, true));

  // invoke
  return this.invoke(body, true, fn.filename);
};

/**
 * Invoke built-in `fn` with `args`.
 *
 * @param {Function} fn
 * @param {Array} args
 * @return {Node}
 * @api private
 */

Evaluator.prototype.invokeBuiltin = function(fn, args){
  // Map arguments to first node
  // providing a nicer js api for
  // BIFs. Functions may specify that
  // they wish to accept full expressions
  // via .raw
  if (fn.raw) {
    args = args.nodes;
  } else {
    if (!fn.params) {
      fn.params = utils.params(fn);
    }
    args = fn.params.reduce(function(ret, param){
      var arg = args.map[param] || args.nodes.shift()
      if (arg) {
        arg = utils.unwrap(arg);
        var len = arg.nodes.length;
        if (len > 1) {
          for (var i = 0; i &lt; len; ++i) {
            ret.push(utils.unwrap(arg.nodes[i].first));
          }
        } else {
          ret.push(arg.first);
        }
      }
      return ret;
    }, []);
  }

  // Invoke the BIF
  var body = utils.coerce(fn.apply(this, args));

  // Always wrapping allows js functions
  // to return several values with a single
  // Expression node
  var expr = new nodes.Expression;
  expr.push(body);
  body = expr;

  // Invoke
  return this.invoke(body);
};

/**
 * Invoke the given function `body`.
 *
 * @param {Block} body
 * @return {Node}
 * @api private
 */

Evaluator.prototype.invoke = function(body, stack, filename){
  var self = this
    , ret;

  if (filename) this.paths.push(dirname(filename));

  // Return
  if (this.return) {
    ret = this.eval(body.nodes);
    if (stack) this.stack.pop();
  // Mixin
  } else {
    body = this.visit(body);
    if (stack) this.stack.pop();
    this.mixin(body.nodes, this.currentBlock);
    ret = nodes.null;
  }

  if (filename) this.paths.pop();

  return ret;
};

/**
 * Mixin the given `nodes` to the given `block`.
 *
 * @param {Array} nodes
 * @param {Block} block
 * @api private
 */

Evaluator.prototype.mixin = function(nodes, block){
  if (!nodes.length) return;
  var len = block.nodes.length
    , head = block.nodes.slice(0, block.index)
    , tail = block.nodes.slice(block.index + 1, len);
  this._mixin(nodes, head, block);
  block.index = 0;
  block.nodes = head.concat(tail);
};

/**
 * Mixin the given `items` to the `dest` array.
 *
 * @param {Array} items
 * @param {Array} dest
 * @param {Block} block
 * @api private
 */

Evaluator.prototype._mixin = function(items, dest, block){
  var node
    , len = items.length;
  for (var i = 0; i &lt; len; ++i) {
    switch ((node = items[i]).nodeName) {
      case 'return':
        return;
      case 'block':
        this._mixin(node.nodes, dest, block);
        break;
      case 'media':
        // fix link to the parent block
        var parentNode = node.block.parent.node;
        if (parentNode &amp;&amp; 'call' != parentNode.nodeName) {
          node.block.parent = block;
        }
      case 'property':
        var val = node.expr;
        // prevent `block` mixin recursion
        if (node.literal &amp;&amp; 'block' == val.first.name) {
          val = utils.unwrap(val);
          val.nodes[0] = new nodes.Literal('block');
        }
      default:
        dest.push(node);
    }
  }
};

/**
 * Mixin the given `node` to the current block.
 *
 * @param {Node} node
 * @api private
 */

Evaluator.prototype.mixinNode = function(node){
  node = this.visit(node.first);
  switch (node.nodeName) {
    case 'object':
      this.mixinObject(node);
      return nodes.null;
    case 'block':
    case 'atblock':
      this.mixin(node.nodes, this.currentBlock);
      return nodes.null;
  }
};

/**
 * Mixin the given `object` to the current block.
 *
 * @param {Object} object
 * @api private
 */

Evaluator.prototype.mixinObject = function(object){
  var Parser = require('../parser')
    , root = this.root
    , str = '$block ' + object.toBlock()
    , parser = new Parser(str, utils.merge({ root: block }, this.options))
    , block;

  try {
    block = parser.parse();
  } catch (err) {
    err.filename = this.filename;
    err.lineno = parser.lexer.lineno;
    err.column = parser.lexer.column;
    err.input = str;
    throw err;
  }

  block.parent = root;
  block.scope = false;
  var ret = this.visit(block)
    , vals = ret.first.nodes;
  for (var i = 0, len = vals.length; i &lt; len; ++i) {
    if (vals[i].block) {
      this.mixin(vals[i].block.nodes, this.currentBlock);
      break;
    }
  }
};

/**
 * Evaluate the given `vals`.
 *
 * @param {Array} vals
 * @return {Node}
 * @api private
 */

Evaluator.prototype.eval = function(vals){
  if (!vals) return nodes.null;
  var len = vals.length
    , node = nodes.null;

  try {
    for (var i = 0; i &lt; len; ++i) {
      node = vals[i];
      switch (node.nodeName) {
        case 'if':
          if ('block' != node.block.nodeName) {
            node = this.visit(node);
            break;
          }
        case 'each':
        case 'block':
          node = this.visit(node);
          if (node.nodes) node = this.eval(node.nodes);
          break;
        default:
          node = this.visit(node);
      }
    }
  } catch (err) {
    if ('return' == err.nodeName) {
      return err.expr;
    } else {
      throw err;
    }
  }

  return node;
};

/**
 * Literal function `call`.
 *
 * @param {Call} call
 * @return {call}
 * @api private
 */

Evaluator.prototype.literalCall = function(call){
  call.args = this.visit(call.args);
  return call;
};

/**
 * Lookup property `name`.
 *
 * @param {String} name
 * @return {Property}
 * @api private
 */

Evaluator.prototype.lookupProperty = function(name){
  var i = this.stack.length
    , index = this.currentBlock.index
    , top = i
    , nodes
    , block
    , len
    , other;

  while (i--) {
    block = this.stack[i].block;
    if (!block.node) continue;
    switch (block.node.nodeName) {
      case 'group':
      case 'function':
      case 'if':
      case 'each':
      case 'atrule':
      case 'media':
      case 'atblock':
      case 'call':
        nodes = block.nodes;
        // scan siblings from the property index up
        if (i + 1 == top) {
          while (index--) {
            // ignore current property
            if (this.property == nodes[index]) continue;
            other = this.interpolate(nodes[index]);
            if (name == other) return nodes[index].clone();
          }
        // sequential lookup for non-siblings (for now)
        } else {
          len = nodes.length;
          while (len--) {
            if ('property' != nodes[len].nodeName
              || this.property == nodes[len]) continue;
            other = this.interpolate(nodes[len]);
            if (name == other) return nodes[len].clone();
          }
        }
        break;
    }
  }

  return nodes.null;
};

/**
 * Return the closest mixin-able `Block`.
 *
 * @return {Block}
 * @api private
 */

Evaluator.prototype.__defineGetter__('closestBlock', function(){
  var i = this.stack.length
    , block;
  while (i--) {
    block = this.stack[i].block;
    if (block.node) {
      switch (block.node.nodeName) {
        case 'group':
        case 'keyframes':
        case 'atrule':
        case 'atblock':
        case 'media':
        case 'call':
          return block;
      }
    }
  }
});

/**
 * Return the closest group block.
 *
 * @return {Block}
 * @api private
 */

Evaluator.prototype.__defineGetter__('closestGroup', function(){
  var i = this.stack.length
    , block;
  while (i--) {
    block = this.stack[i].block;
    if (block.node &amp;&amp; 'group' == block.node.nodeName) {
      return block;
    }
  }
});

/**
 * Return the current selectors stack.
 *
 * @return {Array}
 * @api private
 */

Evaluator.prototype.__defineGetter__('selectorStack', function(){
  var block
    , stack = [];
  for (var i = 0, len = this.stack.length; i &lt; len; ++i) {
    block = this.stack[i].block;
    if (block.node &amp;&amp; 'group' == block.node.nodeName) {
      block.node.nodes.forEach(function(selector) {
        if (!selector.val) selector.val = this.interpolate(selector);
      }, this);
      stack.push(block.node.nodes);
    }
  }
  return stack;
});

/**
 * Lookup `name`, with support for JavaScript
 * functions, and BIFs.
 *
 * @param {String} name
 * @return {Node}
 * @api private
 */

Evaluator.prototype.lookup = function(name){
  var val;
  if (this.ignoreColors &amp;&amp; name in colors) return;
  if (val = this.stack.lookup(name)) {
    return utils.unwrap(val);
  } else {
    return this.lookupFunction(name);
  }
};

/**
 * Map segments in `node` returning a string.
 *
 * @param {Node} node
 * @return {String}
 * @api private
 */

Evaluator.prototype.interpolate = function(node){
  var self = this
    , isSelector = ('selector' == node.nodeName);
  function toString(node) {
    switch (node.nodeName) {
      case 'function':
      case 'ident':
        return node.name;
      case 'literal':
      case 'string':
        if (self.prefix &amp;&amp; !node.prefixed &amp;&amp; !node.val.nodeName) {
          node.val = node.val.replace(/\.(?=[\w-])|^\.$/g, '.' + self.prefix);
          node.prefixed = true;
        }
        return node.val;
      case 'unit':
        // Interpolation inside keyframes
        return '%' == node.type ? node.val + '%' : node.val;
      case 'member':
        return toString(self.visit(node));
      case 'expression':
        // Prevent cyclic `selector()` calls.
        if (self.calling &amp;&amp; ~self.calling.indexOf('selector') &amp;&amp; self._selector) return self._selector;
        self.return++;
        var ret = toString(self.visit(node).first);
        self.return--;
        if (isSelector) self._selector = ret;
        return ret;
    }
  }

  if (node.segments) {
    return node.segments.map(toString).join('');
  } else {
    return toString(node);
  }
};

/**
 * Lookup JavaScript user-defined or built-in function.
 *
 * @param {String} name
 * @return {Function}
 * @api private
 */

Evaluator.prototype.lookupFunction = function(name){
  var fn = this.functions[name] || bifs[name];
  if (fn) return new nodes.Function(name, fn);
};

/**
 * Check if the given `node` is an ident, and if it is defined.
 *
 * @param {Node} node
 * @return {Boolean}
 * @api private
 */

Evaluator.prototype.isDefined = function(node){
  if ('ident' == node.nodeName) {
    return nodes.Boolean(this.lookup(node.name));
  } else {
    throw new Error('invalid "is defined" check on non-variable ' + node);
  }
};

/**
 * Return `Expression` based on the given `prop`,
 * replacing cyclic calls to the given function `name`
 * with "__CALL__".
 *
 * @param {Property} prop
 * @param {String} name
 * @return {Expression}
 * @api private
 */

Evaluator.prototype.propertyExpression = function(prop, name){
  var expr = new nodes.Expression
    , val = prop.expr.clone();

  // name
  expr.push(new nodes.String(prop.name));

  // replace cyclic call with __CALL__
  function replace(node) {
    if ('call' == node.nodeName &amp;&amp; name == node.name) {
      return new nodes.Literal('__CALL__');
    }

    if (node.nodes) node.nodes = node.nodes.map(replace);
    return node;
  }

  replace(val);
  expr.push(val);
  return expr;
};

/**
 * Cast `expr` to the trailing ident.
 *
 * @param {Expression} expr
 * @return {Unit}
 * @api private
 */

Evaluator.prototype.cast = function(expr){
  return new nodes.Unit(expr.first.val, expr.nodes[1].name);
};

/**
 * Check if `expr` is castable.
 *
 * @param {Expression} expr
 * @return {Boolean}
 * @api private
 */

Evaluator.prototype.castable = function(expr){
  return 2 == expr.nodes.length
    &amp;&amp; 'unit' == expr.first.nodeName
    &amp;&amp; ~units.indexOf(expr.nodes[1].name);
};

/**
 * Warn with the given `msg`.
 *
 * @param {String} msg
 * @api private
 */

Evaluator.prototype.warn = function(msg){
  if (!this.warnings) return;
  console.warn('\u001b[33mWarning:\u001b[0m ' + msg);
};

/**
 * Return the current `Block`.
 *
 * @return {Block}
 * @api private
 */

Evaluator.prototype.__defineGetter__('currentBlock', function(){
  return this.stack.currentFrame.block;
});

/**
 * Return an array of vendor names.
 *
 * @return {Array}
 * @api private
 */

Evaluator.prototype.__defineGetter__('vendors', function(){
  return this.lookup('vendors').nodes.map(function(node){
    return node.string;
  });
});

/**
 * Return the property name without vendor prefix.
 *
 * @param {String} prop
 * @return {String}
 * @api public
 */

Evaluator.prototype.unvendorize = function(prop){
  for (var i = 0, len = this.vendors.length; i &lt; len; i++) {
    if ('official' != this.vendors[i]) {
      var vendor = '-' + this.vendors[i] + '-';
      if (~prop.indexOf(vendor)) return prop.replace(vendor, '');
    }
  }
  return prop;
};

/**
 * Return the current frame `Scope`.
 *
 * @return {Scope}
 * @api private
 */

Evaluator.prototype.__defineGetter__('currentScope', function(){
  return this.stack.currentFrame.scope;
});

/**
 * Return the current `Frame`.
 *
 * @return {Frame}
 * @api private
 */

Evaluator.prototype.__defineGetter__('currentFrame', function(){
  return this.stack.currentFrame;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-ColorConverter.html">ColorConverter</a></li><li><a href="module-ContextMenu.html">ContextMenu</a></li><li><a href="module-DiscordAPI.html">DiscordAPI</a></li><li><a href="module-DiscordClasses.html">DiscordClasses</a></li><li><a href="module-DiscordClassModules.html">DiscordClassModules</a></li><li><a href="module-DiscordContextMenu.html">DiscordContextMenu</a></li><li><a href="module-DiscordModules.html">DiscordModules</a></li><li><a href="module-DiscordSelectors.html">DiscordSelectors</a></li><li><a href="module-DOMTools.html">DOMTools</a></li><li><a href="module-Logger.html">Logger</a></li><li><a href="module-Modals.html">Modals</a></li><li><a href="module-Patcher.html">Patcher</a></li><li><a href="module-PluginUpdater.html">PluginUpdater</a></li><li><a href="module-PluginUtilities.html">PluginUtilities</a></li><li><a href="module-Popouts.html">Popouts</a></li><li><a href="module-powercord_injector.html">powercord/injector</a></li><li><a href="module-ReactComponents.html">ReactComponents</a></li><li><a href="module-ReactTools.html">ReactTools</a></li><li><a href="module-Settings.html">Settings</a></li><li><a href="module-Toasts.html">Toasts</a></li><li><a href="module-Tooltip.html">Tooltip</a></li><li><a href="module-Utilities.html">Utilities</a></li><li><a href="module-WebpackModules.html">WebpackModules</a></li></ul><h3>Classes</h3><ul><li><a href="global.html#ArraySet">ArraySet</a></li><li><a href="global.html#BasicSourceMapConsumer">BasicSourceMapConsumer</a></li><li><a href="CJSImportProcessor.html">CJSImportProcessor</a></li><li><a href="CJSImportTransformer.html">CJSImportTransformer</a></li><li><a href="CommanderError.html">CommanderError</a></li><li><a href="CommandsAPI.html">CommandsAPI</a></li><li><a href="global.html#Compiler">Compiler</a></li><li><a href="CompressedObject.html">CompressedObject</a></li><li><a href="ConvertWorker.html">ConvertWorker</a></li><li><a href="Crc32Probe.html">Crc32Probe</a></li><li><a href="CSS.html">CSS</a></li><li><a href="DataLengthProbe.html">DataLengthProbe</a></li><li><a href="DataWorker.html">DataWorker</a></li><li><a href="DirEntry.html">DirEntry</a></li><li><a href="ESMImportTransformer.html">ESMImportTransformer</a></li><li><a href="FlateWorker.html">FlateWorker</a></li><li><a href="FSWatcher.html">FSWatcher</a></li><li><a href="GenericWorker.html">GenericWorker</a></li><li><a href="global.html#IndexedSourceMapConsumer">IndexedSourceMapConsumer</a></li><li><a href="JSX.html">JSX</a></li><li><a href="JSZip.html">JSZip</a></li><li><a href="KeybindsAPI.html">KeybindsAPI</a></li><li><a href="LabsAPI.html">LabsAPI</a></li><li><a href="Less.html">Less</a></li><li><a href="LessError.html">LessError</a></li><li><a href="global.html#MappingList">MappingList</a></li><li><a href="module.html#.exports">exports</a></li><li><a href="module-ContextMenu-ImageItem.html">ImageItem</a></li><li><a href="module-ContextMenu-ItemGroup.html">ItemGroup</a></li><li><a href="module-ContextMenu-Menu.html">Menu</a></li><li><a href="module-ContextMenu-MenuItem.html">MenuItem</a></li><li><a href="module-ContextMenu-SubMenuItem.html">SubMenuItem</a></li><li><a href="module-ContextMenu-TextItem.html">TextItem</a></li><li><a href="module-ContextMenu-ToggleItem.html">ToggleItem</a></li><li><a href="module-DiscordAPI.Channel.html">Channel</a></li><li><a href="module-DiscordAPI.Guild.html">Guild</a></li><li><a href="module-DiscordAPI.InsufficientPermissions.html">InsufficientPermissions</a></li><li><a href="module-DiscordAPI.Message.html">Message</a></li><li><a href="module-DiscordAPI.User.html">User</a></li><li><a href="module-DiscordAPI.UserSettings.html">UserSettings</a></li><li><a href="module-DOMTools.ClassName.html">ClassName</a></li><li><a href="module-DOMTools.DOMObserver.html">DOMObserver</a></li><li><a href="module-DOMTools.Selector.html">Selector</a></li><li><a href="module-PluginUtilities-Helpers.html">Helpers</a></li><li><a href="module-ReactTools-Reflection.html">Reflection</a></li><li><a href="module-Settings.ColorPicker.html">ColorPicker</a></li><li><a href="module-Settings.Dropdown.html">Dropdown</a></li><li><a href="module-Settings.FilePicker.html">FilePicker</a></li><li><a href="module-Settings.Keybind.html">Keybind</a></li><li><a href="module-Settings.RadioGroup.html">RadioGroup</a></li><li><a href="module-Settings.SettingField.html">SettingField</a></li><li><a href="module-Settings.SettingGroup.html">SettingGroup</a></li><li><a href="module-Settings.SettingPanel.html">SettingPanel</a></li><li><a href="module-Settings.Slider.html">Slider</a></li><li><a href="module-Settings.Switch.html">Switch</a></li><li><a href="module-Settings.Textbox.html">Textbox</a></li><li><a href="module-Tooltip-Tooltip.html">Tooltip</a></li><li><a href="module-WebpackModules-Filters.html">Filters</a></li><li><a href="module-WebpackModules-List.html">List</a></li><li><a href="module-WebpackModules-Listenable.html">Listenable</a></li><li><a href="module-WebpackModules-Screen.html">Screen</a></li><li><a href="NodejsStreamInputAdapter.html">NodejsStreamInputAdapter</a></li><li><a href="NodejsStreamOutputAdapter.html">NodejsStreamOutputAdapter</a></li><li><a href="OptionalChainingNullishTransformer.html">OptionalChainingNullishTransformer</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="Powercord.html">Powercord</a></li><li><a href="ReactDisplayNameTransformer.html">ReactDisplayNameTransformer</a></li><li><a href="RouterAPI.html">RouterAPI</a></li><li><a href="RpcAPI.html">RpcAPI</a></li><li><a href="SCSS.html">SCSS</a></li><li><a href="Section.html">Section</a></li><li><a href="SettingsAPI.html">SettingsAPI</a></li><li><a href="global.html#SourceMapGenerator">SourceMapGenerator</a></li><li><a href="global.html#SourceNode">SourceNode</a></li><li><a href="StreamHelper.html">StreamHelper</a></li><li><a href="Stylus.html">Stylus</a></li><li><a href="Updatable.html">Updatable</a></li><li><a href="Utf8DecodeWorker.html">Utf8DecodeWorker</a></li><li><a href="Utf8EncodeWorker.html">Utf8EncodeWorker</a></li><li><a href="ZipEntries.html">ZipEntries</a></li><li><a href="ZipEntry.html">ZipEntry</a></li><li><a href="ZipObject.html">ZipObject</a></li></ul><h3>Interfaces</h3><ul><li><a href="module-DiscordContextMenu-MenuControlItem.html">MenuControlItem</a></li><li><a href="module-DiscordContextMenu-MenuItem.html">MenuItem</a></li><li><a href="module-DiscordContextMenu-MenuRadioItem.html">MenuRadioItem</a></li><li><a href="module-DiscordContextMenu-MenuToggleItem.html">MenuToggleItem</a></li><li><a href="module-DiscordContextMenu-SubMenuItem.html">SubMenuItem</a></li><li><a href="module-DOMTools-Offset.html">Offset</a></li><li><a href="module-FilePicker.html">FilePicker</a></li><li><a href="module-Modals-Changelog.html">Changelog</a></li><li><a href="module-Settings-DropdownItem.html">DropdownItem</a></li><li><a href="module-Settings-RadioItem.html">RadioItem</a></li></ul><h3>Mixins</h3><ul><li><a href="FsEventsHandler.html">FsEventsHandler</a></li><li><a href="NodeFsHandler.html">NodeFsHandler</a></li></ul><h3>Global</h3><ul><li><a href="global.html"></a></li><li><a href="global.html#__extends">__extends</a></li><li><a href="global.html#__importDefault">__importDefault</a></li><li><a href="global.html#_init">_init</a></li><li><a href="global.html#_tsinterfacechecker">_tsinterfacechecker</a></li><li><a href="global.html#_utf8len">_utf8len</a></li><li><a href="global.html#absolute">absolute</a></li><li><a href="global.html#accumulate">accumulate</a></li><li><a href="global.html#addFile">addFile</a></li><li><a href="global.html#addHook">addHook</a></li><li><a href="global.html#addParent">addParent</a></li><li><a href="global.html#adjust">adjust</a></li><li><a href="global.html#alias">alias</a></li><li><a href="global.html#alpha">alpha</a></li><li><a href="global.html#AnsiEscapes">AnsiEscapes</a></li><li><a href="global.html#anymatch">anymatch</a></li><li><a href="global.html#applySourceMaps">applySourceMaps</a></li><li><a href="global.html#Arguments">Arguments</a></li><li><a href="global.html#array">array</a></li><li><a href="global.html#arrayLikeToArrayLike">arrayLikeToArrayLike</a></li><li><a href="global.html#arrayLikeToString">arrayLikeToString</a></li><li><a href="global.html#arrayToStringHelper">arrayToStringHelper</a></li><li><a href="global.html#assertColor">assertColor</a></li><li><a href="global.html#assertPresent">assertPresent</a></li><li><a href="global.html#assertString">assertString</a></li><li><a href="global.html#assertType">assertType</a></li><li><a href="global.html#Atblock">Atblock</a></li><li><a href="global.html#Atrule">Atrule</a></li><li><a href="global.html#Base">Base</a></li><li><a href="global.html#basename">basename</a></li><li><a href="global.html#baseParseSubscript">baseParseSubscript</a></li><li><a href="global.html#BasicType">BasicType</a></li><li><a href="global.html#basicTypes">basicTypes</a></li><li><a href="global.html#BinOp">BinOp</a></li><li><a href="global.html#blend">blend</a></li><li><a href="global.html#Block">Block</a></li><li><a href="global.html#blue">blue</a></li><li><a href="global.html#Boolean">Boolean</a></li><li><a href="global.html#braces">braces</a></li><li><a href="global.html#Call">Call</a></li><li><a href="global.html#camelcase">camelcase</a></li><li><a href="global.html#catch">catch</a></li><li><a href="global.html#charset">charset</a></li><li><a href="global.html#Charset">Charset</a></li><li><a href="global.html#checkEntryCRC32">checkEntryCRC32</a></li><li><a href="global.html#Checker">Checker</a></li><li><a href="global.html#checkImports">checkImports</a></li><li><a href="global.html#checkSupport">checkSupport</a></li><li><a href="global.html#clamp">clamp</a></li><li><a href="global.html#clampAlpha">clampAlpha</a></li><li><a href="global.html#clampDegrees">clampDegrees</a></li><li><a href="global.html#clampPercentage">clampPercentage</a></li><li><a href="global.html#coerce">coerce</a></li><li><a href="global.html#coerceArray">coerceArray</a></li><li><a href="global.html#coerceObject">coerceObject</a></li><li><a href="global.html#CoercionError">CoercionError</a></li><li><a href="global.html#colors">colors</a></li><li><a href="global.html#Command">Command</a></li><li><a href="global.html#comment">comment</a></li><li><a href="global.html#Comment">Comment</a></li><li><a href="global.html#compare">compare</a></li><li><a href="global.html#compareByGeneratedPositionsDeflated">compareByGeneratedPositionsDeflated</a></li><li><a href="global.html#compareByGeneratedPositionsInflated">compareByGeneratedPositionsInflated</a></li><li><a href="global.html#compareByOriginalPositions">compareByOriginalPositions</a></li><li><a href="global.html#compile">compile</a></li><li><a href="global.html#compileSelectors">compileSelectors</a></li><li><a href="global.html#component">component</a></li><li><a href="global.html#componentMap">componentMap</a></li><li><a href="global.html#Compressed">Compressed</a></li><li><a href="global.html#computeSourceMap">computeSourceMap</a></li><li><a href="global.html#computeSourceURL">computeSourceURL</a></li><li><a href="global.html#concat">concat</a></li><li><a href="global.html#config">config</a></li><li><a href="global.html#contentType">contentType</a></li><li><a href="global.html#contrast">contrast</a></li><li><a href="global.html#convert">convert</a></li><li><a href="global.html#convertCSS">convertCSS</a></li><li><a href="global.html#Converter">Converter</a></li><li><a href="global.html#copy">copy</a></li><li><a href="global.html#coremods">coremods</a></li><li><a href="global.html#crc32str">crc32str</a></li><li><a href="global.html#createCheckers">createCheckers</a></li><li><a href="global.html#createDebug">createDebug</a></li><li><a href="global.html#createFSEventsInstance">createFSEventsInstance</a></li><li><a href="global.html#createFsWatchInstance">createFsWatchInstance</a></li><li><a href="global.html#createPattern">createPattern</a></li><li><a href="global.html#crypto">crypto</a></li><li><a href="global.html#decode">decode</a></li><li><a href="global.html#defaultMimes">defaultMimes</a></li><li><a href="global.html#define">define</a></li><li><a href="global.html#deflate">deflate</a></li><li><a href="global.html#Deflate">Deflate</a></li><li><a href="global.html#deflateRaw">deflateRaw</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#deprecate">deprecate</a></li><li><a href="global.html#DepsResolver">DepsResolver</a></li><li><a href="global.html#DetailContext">DetailContext</a></li><li><a href="global.html#dirname">dirname</a></li><li><a href="global.html#disable">disable</a></li><li><a href="global.html#disableAll">disableAll</a></li><li><a href="global.html#doQuickSort">doQuickSort</a></li><li><a href="global.html#DOT_LITERAL">DOT_LITERAL</a></li><li><a href="global.html#Each">Each</a></li><li><a href="global.html#emit">emit</a></li><li><a href="global.html#enable">enable</a></li><li><a href="global.html#enableAll">enableAll</a></li><li><a href="global.html#enabled">enabled</a></li><li><a href="global.html#encloseBrace">encloseBrace</a></li><li><a href="global.html#encode">encode</a></li><li><a href="global.html#encodingTypes">encodingTypes</a></li><li><a href="global.html#enumlit">enumlit</a></li><li><a href="global.html#enumtype">enumtype</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#escapeNode">escapeNode</a></li><li><a href="global.html#Evaluator">Evaluator</a></li><li><a href="global.html#EventEmitter">EventEmitter</a></li><li><a href="global.html#events">events</a></li><li><a href="global.html#exceedsLimit">exceedsLimit</a></li><li><a href="global.html#expandRange">expandRange</a></li><li><a href="global.html#Expression">Expression</a></li><li><a href="global.html#Extend">Extend</a></li><li><a href="global.html#extension">extension</a></li><li><a href="global.html#extname">extname</a></li><li><a href="global.html#FACTOR_TABLE">FACTOR_TABLE</a></li><li><a href="global.html#Feature">Feature</a></li><li><a href="global.html#find">find</a></li><li><a href="global.html#findCompression">findCompression</a></li><li><a href="global.html#flatten">flatten</a></li><li><a href="global.html#fmtLong">fmtLong</a></li><li><a href="global.html#fmtShort">fmtShort</a></li><li><a href="global.html#formatArgs">formatArgs</a></li><li><a href="global.html#formatException">formatException</a></li><li><a href="global.html#formatJSXStringValueLiteral">formatJSXStringValueLiteral</a></li><li><a href="global.html#formatJSXTextLiteral">formatJSXTextLiteral</a></li><li><a href="global.html#formatJSXTextReplacement">formatJSXTextReplacement</a></li><li><a href="global.html#formatters">formatters</a></li><li><a href="global.html#Frame">Frame</a></li><li><a href="global.html#fromHSLA">fromHSLA</a></li><li><a href="global.html#fromRGBA">fromRGBA</a></li><li><a href="global.html#fromVLQSigned">fromVLQSigned</a></li><li><a href="global.html#fs">fs</a></li><li><a href="global.html#FSEventsWatchers">FSEventsWatchers</a></li><li><a href="global.html#fsWatchBroadcast">fsWatchBroadcast</a></li><li><a href="global.html#FsWatchInstances">FsWatchInstances</a></li><li><a href="global.html#func">func</a></li><li><a href="global.html#Function">Function</a></li><li><a href="global.html#functions">functions</a></li><li><a href="global.html#generateCentralDirectoryEnd">generateCentralDirectoryEnd</a></li><li><a href="global.html#generateDataDescriptors">generateDataDescriptors</a></li><li><a href="global.html#generateDosExternalFileAttr">generateDosExternalFileAttr</a></li><li><a href="global.html#generatedPositionAfter">generatedPositionAfter</a></li><li><a href="global.html#generateUnixExternalFileAttr">generateUnixExternalFileAttr</a></li><li><a href="global.html#generateWorker">generateWorker</a></li><li><a href="global.html#generateZipParts">generateZipParts</a></li><li><a href="global.html#genIterator">genIterator</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getAppDir">getAppDir</a></li><li><a href="global.html#getArg">getArg</a></li><li><a href="global.html#getCache">getCache</a></li><li><a href="global.html#getClassInfo">getClassInfo</a></li><li><a href="global.html#getCompression">getCompression</a></li><li><a href="global.html#getDeclarationInfo">getDeclarationInfo</a></li><li><a href="global.html#getFormattedTokens">getFormattedTokens</a></li><li><a href="global.html#getIdentifierNames">getIdentifierNames</a></li><li><a href="global.html#getSucraseContext">getSucraseContext</a></li><li><a href="global.html#getTSImportedNames">getTSImportedNames</a></li><li><a href="global.html#getType">getType</a></li><li><a href="global.html#getTypeOf">getTypeOf</a></li><li><a href="global.html#green">green</a></li><li><a href="global.html#Group">Group</a></li><li><a href="global.html#gzip">gzip</a></li><li><a href="global.html#hasOwnProperty">hasOwnProperty</a></li><li><a href="global.html#hasShadowedGlobals">hasShadowedGlobals</a></li><li><a href="global.html#hsl">hsl</a></li><li><a href="global.html#hsla">hsla</a></li><li><a href="global.html#HSLA">HSLA</a></li><li><a href="global.html#hue">hue</a></li><li><a href="global.html#humanReadableArgName">humanReadableArgName</a></li><li><a href="global.html#Ident">Ident</a></li><li><a href="global.html#identifyShadowedGlobals">identifyShadowedGlobals</a></li><li><a href="global.html#identity">identity</a></li><li><a href="global.html#If">If</a></li><li><a href="global.html#iface">iface</a></li><li><a href="global.html#Image">Image</a></li><li><a href="global.html#imageSize">imageSize</a></li><li><a href="global.html#Import">Import</a></li><li><a href="global.html#importFile">importFile</a></li><li><a href="global.html#imports">imports</a></li><li><a href="global.html#incrementNodeInspectorPort">incrementNodeInspectorPort</a></li><li><a href="global.html#Inflate">Inflate</a></li><li><a href="global.html#inflate">inflate</a></li><li><a href="global.html#inflateRaw">inflateRaw</a></li><li><a href="global.html#inherits">inherits</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#inspect">inspect</a></li><li><a href="global.html#inspectOpts">inspectOpts</a></li><li><a href="global.html#instances">instances</a></li><li><a href="global.html#intersection">intersection</a></li><li><a href="global.html#isAccessModifier">isAccessModifier</a></li><li><a href="global.html#isAnyObject">isAnyObject</a></li><li><a href="global.html#isArray">isArray</a></li><li><a href="global.html#isAsyncOperation">isAsyncOperation</a></li><li><a href="global.html#isBlob">isBlob</a></li><li><a href="global.html#isBoolean">isBoolean</a></li><li><a href="global.html#isDate">isDate</a></li><li><a href="global.html#isEmptyArray">isEmptyArray</a></li><li><a href="global.html#isEmptyObject">isEmptyObject</a></li><li><a href="global.html#isEmptyString">isEmptyString</a></li><li><a href="global.html#isError">isError</a></li><li><a href="global.html#isFile">isFile</a></li><li><a href="global.html#isFullArray">isFullArray</a></li><li><a href="global.html#isFullObject">isFullObject</a></li><li><a href="global.html#isFullString">isFullString</a></li><li><a href="global.html#isFunction">isFunction</a></li><li><a href="global.html#isInvalidBrace">isInvalidBrace</a></li><li><a href="global.html#isMap">isMap</a></li><li><a href="global.html#isNaNValue">isNaNValue</a></li><li><a href="global.html#isNull">isNull</a></li><li><a href="global.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="global.html#isNumber">isNumber</a></li><li><a href="global.html#isObject">isObject</a></li><li><a href="global.html#isObjectLike">isObjectLike</a></li><li><a href="global.html#isOpenOrClose">isOpenOrClose</a></li><li><a href="global.html#isPlainObject">isPlainObject</a></li><li><a href="global.html#isPrimitive">isPrimitive</a></li><li><a href="global.html#isPromise">isPromise</a></li><li><a href="global.html#isRegExp">isRegExp</a></li><li><a href="global.html#isRegistered">isRegistered</a></li><li><a href="global.html#isSet">isSet</a></li><li><a href="global.html#isString">isString</a></li><li><a href="global.html#isSymbol">isSymbol</a></li><li><a href="global.html#isType">isType</a></li><li><a href="global.html#isUndefined">isUndefined</a></li><li><a href="global.html#isWeakMap">isWeakMap</a></li><li><a href="global.html#isWeakSet">isWeakSet</a></li><li><a href="global.html#join">join</a></li><li><a href="global.html#json">json</a></li><li><a href="global.html#jsonCharacterEncoding">jsonCharacterEncoding</a></li><li><a href="global.html#jsonMimeTypeRegex">jsonMimeTypeRegex</a></li><li><a href="global.html#Keyframes">Keyframes</a></li><li><a href="global.html#lessFolder">lessFolder</a></li><li><a href="global.html#Lexer">Lexer</a></li><li><a href="global.html#lightness">lightness</a></li><li><a href="global.html#lit">lit</a></li><li><a href="global.html#Literal">Literal</a></li><li><a href="global.html#literal">literal</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#loadImplementation">loadImplementation</a></li><li><a href="global.html#localstorage">localstorage</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#lookup">lookup</a></li><li><a href="global.html#lookupIndex">lookupIndex</a></li><li><a href="global.html#lruMemoize">lruMemoize</a></li><li><a href="global.html#luminosity">luminosity</a></li><li><a href="global.html#makeTable">makeTable</a></li><li><a href="global.html#Mapping">Mapping</a></li><li><a href="global.html#match">match</a></li><li><a href="global.html#matchPatterns">matchPatterns</a></li><li><a href="global.html#math">math</a></li><li><a href="global.html#Media">Media</a></li><li><a href="global.html#Member">Member</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#middleware">middleware</a></li><li><a href="global.html#mime">mime</a></li><li><a href="global.html#mixin">mixin</a></li><li><a href="global.html#Module">Module</a></li><li><a href="global.html#modules">modules</a></li><li><a href="global.html#name">name</a></li><li><a href="global.html#names">names</a></li><li><a href="global.html#Namespace">Namespace</a></li><li><a href="global.html#newBlob">newBlob</a></li><li><a href="global.html#next">next</a></li><li><a href="global.html#Node">Node</a></li><li><a href="global.html#nodes">nodes</a></li><li><a href="global.html#NoopContext">NoopContext</a></li><li><a href="global.html#normalize">normalize</a></li><li><a href="global.html#Normalizer">Normalizer</a></li><li><a href="global.html#Null">Null</a></li><li><a href="global.html#NullCache">NullCache</a></li><li><a href="global.html#Object">Object</a></li><li><a href="global.html#Observable">Observable</a></li><li><a href="global.html#oldJson">oldJson</a></li><li><a href="global.html#operate">operate</a></li><li><a href="global.html#opt">opt</a></li><li><a href="global.html#Option">Option</a></li><li><a href="global.html#optionalWrap">optionalWrap</a></li><li><a href="global.html#outputHelpIfRequested">outputHelpIfRequested</a></li><li><a href="global.html#pad">pad</a></li><li><a href="global.html#param">param</a></li><li><a href="global.html#Params">Params</a></li><li><a href="global.html#params">params</a></li><li><a href="global.html#parse">parse</a></li><li><a href="global.html#ParseError">ParseError</a></li><li><a href="global.html#parseIdentifierStatement">parseIdentifierStatement</a></li><li><a href="global.html#parseMaybeAssign">parseMaybeAssign</a></li><li><a href="global.html#parseObject">parseObject</a></li><li><a href="global.html#Parser">Parser</a></li><li><a href="global.html#parseSourceMapInput">parseSourceMapInput</a></li><li><a href="global.html#parseSpec">parseSpec</a></li><li><a href="global.html#parseString">parseString</a></li><li><a href="global.html#picomatch">picomatch</a></li><li><a href="global.html#PluginLoader">PluginLoader</a></li><li><a href="global.html#PluginManager">PluginManager</a></li><li><a href="global.html#plural">plural</a></li><li><a href="global.html#POSIX_REGEX_SOURCE">POSIX_REGEX_SOURCE</a></li><li><a href="global.html#post">post</a></li><li><a href="global.html#prefixClasses">prefixClasses</a></li><li><a href="global.html#prepareContent">prepareContent</a></li><li><a href="global.html#pretty">pretty</a></li><li><a href="global.html#processConstructor">processConstructor</a></li><li><a href="global.html#processEntity">processEntity</a></li><li><a href="global.html#Property">Property</a></li><li><a href="global.html#pseudoSelectors">pseudoSelectors</a></li><li><a href="global.html#publisher">publisher</a></li><li><a href="global.html#Query">Query</a></li><li><a href="global.html#QueryList">QueryList</a></li><li><a href="global.html#querystring">querystring</a></li><li><a href="global.html#quickSort">quickSort</a></li><li><a href="global.html#randomIntInRange">randomIntInRange</a></li><li><a href="global.html#range">range</a></li><li><a href="global.html#rangeToPattern">rangeToPattern</a></li><li><a href="global.html#raw">raw</a></li><li><a href="global.html#readdirp">readdirp</a></li><li><a href="global.html#readWord">readWord</a></li><li><a href="global.html#recursiveSearch">recursiveSearch</a></li><li><a href="global.html#red">red</a></li><li><a href="global.html#reduce">reduce</a></li><li><a href="global.html#register">register</a></li><li><a href="global.html#relative">relative</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#Renderer">Renderer</a></li><li><a href="global.html#replace">replace</a></li><li><a href="global.html#request">request</a></li><li><a href="global.html#Return">Return</a></li><li><a href="global.html#rgb">rgb</a></li><li><a href="global.html#RGBA">RGBA</a></li><li><a href="global.html#rgba">rgba</a></li><li><a href="global.html#rmdirRf">rmdirRf</a></li><li><a href="global.html#Root">Root</a></li><li><a href="global.html#runSerial">runSerial</a></li><li><a href="global.html#s">s</a></li><li><a href="global.html#saturation">saturation</a></li><li><a href="global.html#save">save</a></li><li><a href="global.html#scan">scan</a></li><li><a href="global.html#Scope">Scope</a></li><li><a href="global.html#search">search</a></li><li><a href="global.html#selectColor">selectColor</a></li><li><a href="global.html#Selector">Selector</a></li><li><a href="global.html#selectorExists">selectorExists</a></li><li><a href="global.html#SelectorParser">SelectorParser</a></li><li><a href="global.html#selectorTokens">selectorTokens</a></li><li><a href="global.html#setFSEventsListener">setFSEventsListener</a></li><li><a href="global.html#setFsWatchFileListener">setFsWatchFileListener</a></li><li><a href="global.html#setFsWatchListener">setFsWatchListener</a></li><li><a href="global.html#shouldElideDefaultExport">shouldElideDefaultExport</a></li><li><a href="global.html#shouldPreferGlobalPromise">shouldPreferGlobalPromise</a></li><li><a href="global.html#skipFieldName">skipFieldName</a></li><li><a href="global.html#skipToNextClassElement">skipToNextClassElement</a></li><li><a href="global.html#SourceMap">SourceMap</a></li><li><a href="global.html#SourceMapper">SourceMapper</a></li><li><a href="global.html#split">split</a></li><li><a href="global.html#Stack">Stack</a></li><li><a href="global.html#startsWithLowerCase">startsWithLowerCase</a></li><li><a href="global.html#String">String</a></li><li><a href="global.html#string2binary">string2binary</a></li><li><a href="global.html#stringToArrayLike">stringToArrayLike</a></li><li><a href="global.html#stylus">stylus</a></li><li><a href="global.html#subscribe">subscribe</a></li><li><a href="global.html#subscribers">subscribers</a></li><li><a href="global.html#substr">substr</a></li><li><a href="global.html#Supports">Supports</a></li><li><a href="global.html#swap">swap</a></li><li><a href="global.html#SyntaxError">SyntaxError</a></li><li><a href="global.html#syntaxError">syntaxError</a></li><li><a href="global.html#tan">tan</a></li><li><a href="global.html#Ternary">Ternary</a></li><li><a href="global.html#tests">tests</a></li><li><a href="global.html#then">then</a></li><li><a href="global.html#thenify">thenify</a></li><li><a href="global.html#thenifyAll">thenifyAll</a></li><li><a href="global.html#Token">Token</a></li><li><a href="global.html#TokenType">TokenType</a></li><li><a href="global.html#toSetString">toSetString</a></li><li><a href="global.html#toVLQSigned">toVLQSigned</a></li><li><a href="global.html#TParamList">TParamList</a></li><li><a href="global.html#TProp">TProp</a></li><li><a href="global.html#transformTo">transformTo</a></li><li><a href="global.html#transformZipOutput">transformZipOutput</a></li><li><a href="global.html#transparentify">transparentify</a></li><li><a href="global.html#trim">trim</a></li><li><a href="global.html#true">true</a></li><li><a href="global.html#tryAutoDetect">tryAutoDetect</a></li><li><a href="global.html#tsParseModifier">tsParseModifier</a></li><li><a href="global.html#tsParseTypePredicateOrAssertsPrefix">tsParseTypePredicateOrAssertsPrefix</a></li><li><a href="global.html#tty">tty</a></li><li><a href="global.html#TType">TType</a></li><li><a href="global.html#tuple">tuple</a></li><li><a href="global.html#type">type</a></li><li><a href="global.html#typedParseConditional">typedParseConditional</a></li><li><a href="global.html#typeMap">typeMap</a></li><li><a href="global.html#types_2">types_2</a></li><li><a href="global.html#UnaryOp">UnaryOp</a></li><li><a href="global.html#unexpected">unexpected</a></li><li><a href="global.html#union">union</a></li><li><a href="global.html#uniq">uniq</a></li><li><a href="global.html#unit">unit</a></li><li><a href="global.html#Unit">Unit</a></li><li><a href="global.html#unitMap">unitMap</a></li><li><a href="global.html#unquote">unquote</a></li><li><a href="global.html#unregister">unregister</a></li><li><a href="global.html#unregisterAll">unregisterAll</a></li><li><a href="global.html#unsubscribe">unsubscribe</a></li><li><a href="global.html#unwrap">unwrap</a></li><li><a href="global.html#updatePosition">updatePosition</a></li><li><a href="global.html#url">url</a></li><li><a href="global.html#use">use</a></li><li><a href="global.html#useColors">useColors</a></li><li><a href="global.html#utf8decode">utf8decode</a></li><li><a href="global.html#utf8encode">utf8encode</a></li><li><a href="global.html#utils">utils</a></li><li><a href="global.html#VError">VError</a></li><li><a href="global.html#version">version</a></li><li><a href="global.html#visit">visit</a></li><li><a href="global.html#Visitor">Visitor</a></li><li><a href="global.html#warn">warn</a></li><li><a href="global.html#watch">watch</a></li><li><a href="global.html#webpack">webpack</a></li><li><a href="global.html#WINDOWS_CHARS">WINDOWS_CHARS</a></li><li><a href="global.html#withCallback">withCallback</a></li><li><a href="global.html#wrap">wrap</a></li><li><a href="global.html#ZeresPluginLibrary">ZeresPluginLibrary</a></li><li><a href="global.html#zip">zip</a></li><li><a href="global.html#ZipFileWorker">ZipFileWorker</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Mon Mar 08 2021 15:13:56 GMT+0100 (Central European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
